<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autosell.mx - Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f9fafb;
            color: #1f2937;
        }
        
        .navbar {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #dc2626;
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }
        
        .nav-links a {
            text-decoration: none;
            color: #6b7280;
            font-weight: 500;
        }
        
        .nav-links a.active {
            color: #2563eb;
        }
        
        .add-btn {
            background: #dc2626;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .dashboard-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .welcome-message {
            color: #6b7280;
            font-size: 1.125rem;
            margin-bottom: 2rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            border: 1px solid #e5e7eb;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card.blue { border-left: 4px solid #2563eb; }
        .stat-card.green { border-left: 4px solid #16a34a; }
        .stat-card.purple { border-left: 4px solid #9333ea; }
        .stat-card.orange { border-left: 4px solid #ea580c; }
        
        .stat-title {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 0.5rem;
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 0.25rem;
        }
        
        .stat-change {
            font-size: 0.875rem;
            color: #16a34a;
        }
        
        .stat-icon {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 2rem;
            height: 2rem;
            opacity: 0.1;
        }
        
        .loading {
            color: #6b7280;
            font-style: italic;
        }
        
        .error {
            color: #dc2626;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo">Autosell.mx</div>
        <ul class="nav-links">
            <li><a href="#" class="active">Dashboard</a></li>
            <li><a href="#">Vehículos</a></li>
            <li><a href="#">Fotos</a></li>
            <li><a href="#">Facebook</a></li>
            <li><a href="#">Configuración</a></li>
        </ul>
        <button class="add-btn">+ Agregar Vehículo</button>
    </nav>

    <div class="container">
        <h1 class="dashboard-title">Dashboard</h1>
        <p class="welcome-message">Bienvenido a Autosell.mx - Tu Sistema de Gestión de Vehículos</p>
        
        <div class="stats-grid">
            <div class="stat-card blue">
                <div class="stat-title">Total de Vehículos</div>
                <div class="stat-value" id="total-vehicles">Loading...</div>
                <div class="stat-change" id="vehicles-change">0%</div>
                <svg class="stat-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M5 11l4-4 4 4 6-6v8H5z"/>
                </svg>
            </div>
            
            <div class="stat-card green">
                <div class="stat-title">Vehículos Disponibles</div>
                <div class="stat-value" id="available-vehicles">Loading...</div>
                <div class="stat-change" id="available-change">0%</div>
                <svg class="stat-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M5 11l4-4 4 4 6-6v8H5z"/>
                </svg>
            </div>
            
            <div class="stat-card purple">
                <div class="stat-title">Valor Total</div>
                <div class="stat-value" id="total-value">Loading...</div>
                <div class="stat-change" id="value-change">0%</div>
                <svg class="stat-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
            </div>
            
            <div class="stat-card orange">
                <div class="stat-title">Fotos Subidas</div>
                <div class="stat-value" id="total-photos">Loading...</div>
                <div class="stat-change" id="photos-change">0%</div>
                <svg class="stat-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H19C20.11 23 21 22.11 21 21V9M19 21H5V3H13V9H19Z"/>
                </svg>
            </div>
        </div>
    </div>

    <script>
        async function loadDashboardStats() {
            try {
                const response = await fetch('http://localhost:8000/dashboard/stats');
                const data = await response.json();
                
                // Update the display with real data
                document.getElementById('total-vehicles').textContent = data.total_vehicles || 0;
                document.getElementById('available-vehicles').textContent = data.available_vehicles || 0;
                document.getElementById('total-value').textContent = '$' + (data.total_value || 0).toLocaleString();
                document.getElementById('total-photos').textContent = data.total_photos || 0;
                
                // Update change percentages
                document.getElementById('vehicles-change').textContent = (data.vehicles_change || 0) + '%';
                document.getElementById('available-change').textContent = (data.available_change || 0) + '%';
                document.getElementById('value-change').textContent = (data.value_change || 0) + '%';
                document.getElementById('photos-change').textContent = (data.photos_change || 0) + '%';
                
                console.log('Dashboard stats loaded:', data);
            } catch (error) {
                console.error('Error loading dashboard stats:', error);
                document.getElementById('total-vehicles').textContent = 'Error';
                document.getElementById('available-vehicles').textContent = 'Error';
                document.getElementById('total-value').textContent = 'Error';
                document.getElementById('total-photos').textContent = 'Error';
            }
        }
        
        // Load the stats when the page loads
        loadDashboardStats();
        
        // Refresh every 30 seconds
        setInterval(loadDashboardStats, 30000);
    </script>
</body>
</html>
