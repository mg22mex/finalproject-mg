{"version":3,"file":"playwright/index.mjs","sources":["webpack://@midscene/web/./src/playwright/index.ts"],"sourcesContent":["import { Agent as PageAgent } from '@midscene/core/agent';\nimport type { Page as PlaywrightPage } from 'playwright';\nimport { WebPage as PlaywrightWebPage } from './page';\n\nexport type { PlayWrightAiFixtureType } from './ai-fixture';\nexport { PlaywrightAiFixture } from './ai-fixture';\nexport { overrideAIConfig } from '@midscene/shared/env';\nexport { WebPage as PlaywrightWebPage } from './page';\nimport type { WebPageAgentOpt } from '@/web-element';\nimport { getDebug } from '@midscene/shared/logger';\nimport { forceClosePopup } from '../puppeteer/base-page';\n\nconst debug = getDebug('playwright:agent');\n\nexport class PlaywrightAgent extends PageAgent<PlaywrightWebPage> {\n  constructor(page: PlaywrightPage, opts?: WebPageAgentOpt) {\n    const webPage = new PlaywrightWebPage(page, opts);\n    super(webPage, opts);\n\n    const { forceSameTabNavigation = true } = opts ?? {};\n\n    if (forceSameTabNavigation) {\n      forceClosePopup(page, debug);\n    }\n  }\n\n  async waitForNetworkIdle(timeout = 1000) {\n    await this.page.underlyingPage.waitForLoadState('networkidle', { timeout });\n  }\n}\n"],"names":["debug","getDebug","PlaywrightAgent","PageAgent","timeout","page","opts","webPage","PlaywrightWebPage","forceSameTabNavigation","forceClosePopup"],"mappings":";;;;;;AAYA,MAAMA,QAAQC,SAAS;AAEhB,MAAMC,wBAAwBC;IAYnC,MAAM,mBAAmBC,UAAU,IAAI,EAAE;QACvC,MAAM,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,eAAe;YAAEA;QAAQ;IAC3E;IAbA,YAAYC,IAAoB,EAAEC,IAAsB,CAAE;QACxD,MAAMC,UAAU,IAAIC,QAAkBH,MAAMC;QAC5C,KAAK,CAACC,SAASD;QAEf,MAAM,EAAEG,yBAAyB,IAAI,EAAE,GAAGH,QAAQ,CAAC;QAEnD,IAAIG,wBACFC,gBAAgBL,MAAML;IAE1B;AAKF"}