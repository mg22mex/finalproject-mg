{"version":3,"file":"static-page.mjs","sources":["webpack://@midscene/playground/./src/static-page.ts"],"sourcesContent":["import type { DeviceAction, Point, UIContext } from '@midscene/core';\nimport type { AbstractInterface } from '@midscene/core/device';\nimport {\n  defineActionDragAndDrop,\n  defineActionHover,\n  defineActionInput,\n  defineActionKeyboardPress,\n  defineActionRightClick,\n  defineActionScroll,\n  defineActionTap,\n} from '@midscene/core/device';\nimport { ERROR_CODE_NOT_IMPLEMENTED_AS_DESIGNED } from '@midscene/shared/common';\n\ntype WebUIContext = UIContext & {\n  screenshotBase64?: string;\n  size: { width: number; height: number; dpr?: number };\n};\n\nconst ThrowNotImplemented = (methodName: string) => {\n  throw new Error(\n    `The method \"${methodName}\" is not implemented as designed since this is a static UI context. (${ERROR_CODE_NOT_IMPLEMENTED_AS_DESIGNED})`,\n  );\n};\n\nexport default class StaticPage implements AbstractInterface {\n  interfaceType = 'static';\n\n  private uiContext: WebUIContext;\n\n  constructor(uiContext: WebUIContext) {\n    if (uiContext.tree) {\n      this.uiContext = uiContext;\n    } else {\n      this.uiContext = Object.assign(uiContext, {\n        tree: {\n          node: null,\n          children: [],\n        },\n      });\n    }\n  }\n\n  actionSpace(): DeviceAction[] {\n    // Return available actions for static page - they will throw \"not implemented\" errors when executed\n    // but need to be available for planning phase\n    return [\n      defineActionTap(async (param) => {\n        ThrowNotImplemented('Tap');\n      }),\n      defineActionRightClick(async (param) => {\n        ThrowNotImplemented('RightClick');\n      }),\n      defineActionHover(async (param) => {\n        ThrowNotImplemented('Hover');\n      }),\n      defineActionInput(async (param) => {\n        ThrowNotImplemented('Input');\n      }),\n      defineActionKeyboardPress(async (param) => {\n        ThrowNotImplemented('KeyboardPress');\n      }),\n      defineActionScroll(async (param) => {\n        ThrowNotImplemented('Scroll');\n      }),\n      defineActionDragAndDrop(async (param) => {\n        ThrowNotImplemented('DragAndDrop');\n      }),\n    ];\n  }\n\n  async evaluateJavaScript<T = unknown>(script: string): Promise<T> {\n    return ThrowNotImplemented('evaluateJavaScript');\n  }\n\n  // @deprecated\n  async getElementsInfo() {\n    return ThrowNotImplemented('getElementsInfo');\n  }\n\n  async getElementsNodeTree() {\n    return ThrowNotImplemented('getElementsNodeTree');\n  }\n\n  async getXpathsById(id: string) {\n    return ThrowNotImplemented('getXpathsById');\n  }\n\n  async getXpathsByPoint(point: Point) {\n    return ThrowNotImplemented('getXpathsByPoint');\n  }\n\n  async getElementInfoByXpath(xpath: string) {\n    return ThrowNotImplemented('getElementInfoByXpath');\n  }\n\n  async size() {\n    return {\n      ...this.uiContext.size,\n      dpr: this.uiContext.size.dpr || 1,\n    };\n  }\n\n  async screenshotBase64() {\n    const base64 = this.uiContext.screenshotBase64;\n    if (!base64) {\n      throw new Error('screenshot base64 is empty');\n    }\n    return base64;\n  }\n\n  async url() {\n    return Promise.resolve('https://static_page_without_url');\n  }\n\n  async scrollUntilTop(startingPoint?: Point) {\n    return ThrowNotImplemented('scrollUntilTop');\n  }\n\n  async scrollUntilBottom(startingPoint?: Point) {\n    return ThrowNotImplemented('scrollUntilBottom');\n  }\n\n  async scrollUntilLeft(startingPoint?: Point) {\n    return ThrowNotImplemented('scrollUntilLeft');\n  }\n\n  async scrollUntilRight(startingPoint?: Point) {\n    return ThrowNotImplemented('scrollUntilRight');\n  }\n\n  async scrollUp(distance?: number, startingPoint?: Point) {\n    return ThrowNotImplemented('scrollUp');\n  }\n\n  async scrollDown(distance?: number, startingPoint?: Point) {\n    return ThrowNotImplemented('scrollDown');\n  }\n\n  async scrollLeft(distance?: number, startingPoint?: Point) {\n    return ThrowNotImplemented('scrollLeft');\n  }\n\n  async scrollRight(distance?: number, startingPoint?: Point) {\n    return ThrowNotImplemented('scrollRight');\n  }\n\n  async clearInput() {\n    return ThrowNotImplemented('clearInput');\n  }\n\n  mouse = {\n    click: ThrowNotImplemented.bind(null, 'mouse.click'),\n    wheel: ThrowNotImplemented.bind(null, 'mouse.wheel'),\n    move: ThrowNotImplemented.bind(null, 'mouse.move'),\n    drag: ThrowNotImplemented.bind(null, 'mouse.drag'),\n  };\n\n  keyboard = {\n    type: ThrowNotImplemented.bind(null, 'keyboard.type'),\n    press: ThrowNotImplemented.bind(null, 'keyboard.press'),\n  };\n\n  async destroy(): Promise<void> {\n    //\n  }\n\n  async getContext(): Promise<UIContext> {\n    return this.uiContext;\n  }\n}\n"],"names":["ThrowNotImplemented","methodName","Error","ERROR_CODE_NOT_IMPLEMENTED_AS_DESIGNED","StaticPage","defineActionTap","param","defineActionRightClick","defineActionHover","defineActionInput","defineActionKeyboardPress","defineActionScroll","defineActionDragAndDrop","script","id","point","xpath","base64","Promise","startingPoint","distance","uiContext","Object"],"mappings":"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"}