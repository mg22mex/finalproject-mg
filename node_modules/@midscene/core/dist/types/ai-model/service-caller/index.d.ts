import { type AIUsageInfo } from '../../types';
import type { StreamingCallback } from '../../types';
import { type IModelPreferences } from '@midscene/shared/env';
import OpenAI from 'openai';
import type { ChatCompletionMessageParam } from 'openai/resources/index';
import { AIActionType, type AIArgs } from '../common';
export declare function call(messages: ChatCompletionMessageParam[], AIActionTypeValue: AIActionType, modelPreferences: IModelPreferences, options?: {
    stream?: boolean;
    onChunk?: StreamingCallback;
}): Promise<{
    content: string;
    usage?: AIUsageInfo;
    isStreamed: boolean;
}>;
export declare const getResponseFormat: (modelName: string, AIActionTypeValue: AIActionType) => OpenAI.ChatCompletionCreateParams["response_format"] | OpenAI.ResponseFormatJSONObject;
export declare function callToGetJSONObject<T>(messages: ChatCompletionMessageParam[], AIActionTypeValue: AIActionType, modelPreferences: IModelPreferences): Promise<{
    content: T;
    usage?: AIUsageInfo;
}>;
export declare function callAiFnWithStringResponse<T>(msgs: AIArgs, AIActionTypeValue: AIActionType, modelPreferences: IModelPreferences): Promise<{
    content: string;
    usage?: AIUsageInfo;
}>;
export declare function extractJSONFromCodeBlock(response: string): string;
export declare function preprocessDoubaoBboxJson(input: string): string;
export declare function safeParseJson(input: string, modelPreferences: IModelPreferences): any;
