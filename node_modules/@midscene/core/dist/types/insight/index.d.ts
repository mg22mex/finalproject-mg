import { callAiFn } from '../ai-model/common';
import type { AIDescribeElementResponse, AIElementResponse, AIUsageInfo, BaseElement, DetailedLocateParam, DumpSubscriber, InsightAction, InsightExtractOption, InsightExtractParam, InsightOptions, InsightTaskInfo, LocateResult, Rect, UIContext } from '../types';
import type { TMultimodalPrompt } from '../ai-model/common';
export interface LocateOpts {
    context?: UIContext<BaseElement>;
    callAI?: typeof callAiFn<AIElementResponse>;
}
export type AnyValue<T> = {
    [K in keyof T]: unknown extends T[K] ? any : T[K];
};
export default class Insight<ElementType extends BaseElement = BaseElement, ContextType extends UIContext<ElementType> = UIContext<ElementType>> {
    contextRetrieverFn: (action: InsightAction) => Promise<ContextType> | ContextType;
    aiVendorFn: (...args: Array<any>) => Promise<any>;
    onceDumpUpdatedFn?: DumpSubscriber;
    taskInfo?: Omit<InsightTaskInfo, 'durationMs'>;
    constructor(context: ContextType | ((action: InsightAction) => Promise<ContextType> | ContextType), opt?: InsightOptions);
    locate(query: DetailedLocateParam, opt?: LocateOpts): Promise<LocateResult>;
    extract<T>(dataDemand: InsightExtractParam, opt?: InsightExtractOption, multimodalPrompt?: TMultimodalPrompt): Promise<{
        data: T;
        thought?: string;
        usage?: AIUsageInfo;
    }>;
    describe(target: Rect | [number, number], opt?: {
        deepThink?: boolean;
    }): Promise<Pick<AIDescribeElementResponse, 'description'>>;
}
